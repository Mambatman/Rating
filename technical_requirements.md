ТЗ

# 1. Цель проекта

Цель проекта — разработать веб-сайт (веб-приложение) для повышения мотивации сотрудников (далее Система).
Сотрудники могут мониторить текущий рейтинг, ознакомится с правилами и комментировать чате


# 2. Описание системы

Система состоит из следующих основных функциональных блоков:

1. Регистрация, аутентификация и авторизация
2. Функционал для управляющего
3. Функционал главной страницы, страницы с правилами и с чатом
4. Функционал для продавца
5. Функционал интеграции рейтинга с CS GO
6. Уведомления о новых изменениях в рейтинге


## 2.1. Типы пользователей

Система предусматривает три типа пользователей системы:
1. Управляющий
2. Администратор
3. Продавец

Управляющий начисляет (или отнимает) баллы, подтверждать аккаунты, принимать заявки на
доступ, может управлять типами пользователей, в том числе и администраторами

Администраторы в соответствии могут принимать заявки новых пользователей на доступ в Систему, начислять или отнимать баллы


## 2.2. Регистрация

Система, как минимум в своей первой версии, не предполагается как SaaS для
разных управляющих. Одна конкретная инсталляция Системы привязана к одному
конкретному управляющему/проекту/магазину. При этом за счёт открытого исходного кода
Систему может скачать и развернуть любой желающий.

Таким образом, ведение разных магазинов/управляющих в рамках одной инсталляции
Системы пока не подразумевается.

Процесс заведения управляющего в инсталляции Системы может быть реализован
в первой версии не в интерфейсе Системы, а при помощи команды на сервере,
это допускается. Этой команде заведения управляющего должны быть переданы на вход
следующие данные:

* email — обязательное поле
* пароль — обязательное поле

Процесс заведения управляющего через команду на сервере должен быть описан в
документации Системы.

Процесс регистрации админа и продавцов, конечно, должен быть реализован в интерфейсах Системы. При регистрации пользователя должны быть запрошены следующие поля:

* email — обязательное поле
* имя и фамилия — обязательное поле
* телефон — опциональное поле

После отправки формы регистрации продавца ему на email приходит
письмо с первым кодом, по которому он может войти. Аутентификация будет
происходить по разовым кодам, приходящим на email.


## 2.3. Аутентификация пользователей

Аутентификация пользователей осуществляется по email и одноразовому
паролю (или по одноразовой ссылке), который приходит на этот email (как
реализовано при входе в Skype у Microsoft).


## 2.4. Функционал для управляющего

Управляющий после аутентификации (ввода логина и пароля) получает доступ к
своему функционалу в Системе. Этот функционал состоит из
следующих блоков:

1. Редактирование данных профиля
2. Заведение и редактирование типов пользователей (админ или продавец)
3. Заведение и редактирование правил
4. Заведение и редактирование планов продаж
5. Управление баллами и интеграцией рейтинга с CS GO
6. Статистика


### 2.4.1. Редактирование профиля

В этом разделе у управляющего есть возможность редактирования данных
своего профиля — email, фото, дата прихода в компанию, описание профиля.
Подтверждение пользователей
Должна быть возможность сменить пароль, подтвердив свой старый пароль.


### 2.4.2. Заведение и редактирование типов пользователей (админ или продавец)

По каждому типу пользователей задаются:

* ФИО
* Должность
* Дата (с какого момента работает в компании)
* Описание
* Рейтинг
* Доступ в чат


### 2.4.3. Заведение и редактирование правил

Контент, публикуемый управляющим, может представлять собой форматированный текст
с возможностью, как минимум, выделения текста жирным, курсивом, подчеркнутым,
перечеркнутым. Возможно стоит добавить возможность создания заголовков разного
размера для структурирования длинного текстового контента.

Должна быть возможность добавления списков и изображений в контент правил.
Частями поста является сам контент и тизер. Тизер — это то, что видит
на странице как тот, кто имеет доступ, так и тот, кто не имеет доступ.

В сам контент может вставляться: текст с форматированием (заголовки,
жирный, курсивный, перечеркнутый текст), изображения (загружаются с компьютера)


### 2.4.4. Заведение и редактирование планов продаж

Управляющий может задавать план продаж (ежедневный, еженедельный, ежемесячный)
Который будет отображаться на главной странице в виде графика по процентам

А также должен быть дата последнего изменение в графике


### 2.4.5. Управление баллами и интеграцией рейтинга с CS GO

Управляющий (и пользователи у кого есть доступ админа) может начислять или отнимать баллы +1 или -1

Управляющий может ввести изменение баллов по рейтингу
18 б = биг стар на ==> 20 б = биг стар и т.д.


### 2.4.6. Статистика

Количество пользователей должно показываться общим числом (и админ, и продавец)
Управляющий может смотреть количество пользователей по типу (админ или продавец)


## 2.5. Функционал главной страницы, страницы с правилами и с чатом

Главная страница Системы — это график выполненного плана (ежедневный, еженедельный, ежемесячный)
каждого отдельного сотрудника (от большого к меньшему)

Далее идёт Лидеры на текущий момент
В этой секции отображается только те пользователи у которых совокупность баллов выполненного плана
(ежедневный, еженедельный, ежемесячный) <= 100% (выше или равно)

Лидеры прошлого этапа (месяца)
Должен отображается (3) победители прошлого этапа (месяца)

Если смотрит гость, то он видит только окно (Pop-up) регистрации/входа.
После регистрации поступает управляющему заявка на доступ и открывается страница с правилами

При клике (или при наведении) на пользователя всплывает (Pop-up) профиля

Страница с правилами — Описание рейтинга, правило аннулирование рейтинга, кейса, баллов.

?! Чат -
Сообщение можно отправлять только в формате текста


## 2.6. Функционал для продавца

Продавец может смотреть графики, других пользователей и ознакомиться с правилами

Комментариев под рейтингами не подразумевается. Шеринг постов не подразумевается как отдельная кнопка.
Также у продавца должна быть возможность на странице своего профиля
отредактировать его данные (email, сменить пароль, редактировать описание, дата с какого момента работает в компании и изменить фото)
В профиле должна быть возможность отключить email сообщения от системы.


## 2.7. Функционал интеграции рейтинга с CS GO

Система должна автоматический добавлять по установленным управляющим критериям
(пример 18балл = биг стар)

А так же должна быть возможность для управляющего редактировать критерии рейтинга.


## 2.8. Уведомления о новых изменениях в рейтинге

Автоматически пользователям должны приходить уведомления на Email о всех новых изменениях в Рейтинге. Пользователи могут отменить эти и другие письма
настройкой в профиле.


# 3. Предлагаемый стек технологий
Для реализации системы, предлагается следующий стек технологий:

* Бэкенд:
- Язык Python
- Фреймворк FastAPI
- БД PostgreSQL
- SQLAlchemy ORM
- Alembic для миграций
- Aiogram для интеграции с Telegram
* Фронтенд:
- React
- TypeScript

В ходе проекта надо сравнить технические возможности платформ и выбрать выгодную.


# 4. Требования к дизайну

Минимализм, лаконичность, адаптивность под мобильные устройства. Белый фон и фирменные цвета.
Должен присутствовать логотип на странице. Логотип можно взять с сайта магазина

В нижней части страницы (футере) должно быть написано:
«Работает на Open Source» со ссылкой на GitHub проекта.
